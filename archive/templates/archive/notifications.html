{% extends 'base.html' %}
{% load static %}

{% block title %}Bildirimler{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2>Bildirimler 
      <small class="text-muted">({{ unread_count }} okunmamış)</small>
  </h2>

  <div class="list-group mt-3">
    {% for n in notifications %}
      <div class="list-group-item d-flex justify-content-between align-items-start 
        {% if not n.read %}list-group-item-info{% endif %}">
        
        <div>
          <h5 class="mb-1">{{ n.title }}</h5>
          <p class="mb-1">{{ n.message|linebreaksbr }}</p>
          <small class="text-muted">{{ n.created_at }}</small>
        </div>

        <div class="text-end">
          {% if not n.read %}
            <form method="post" action="{% url 'taskboard:notification-read' n.pk %}">
              {% csrf_token %}
              <button class="btn btn-sm btn-primary">Okundu olarak işaretle</button>
            </form>
          {% else %}
            <span class="badge bg-success">Okundu</span>
          {% endif %}
        </div>

      </div>
    {% empty %}
      <div class="alert alert-secondary">Henüz bildirim yok.</div>
    {% endfor %}
  </div>
</div>
{% endblock %}
